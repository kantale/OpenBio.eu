<!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
<!-- -------------------------------------------------------- Right Panel ---------------------------------------------------------------------------- -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
<div class="rightPanel">
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- ---------------------------------------------- Create Tool / Data Right Panel ------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="faster" id="createToolDataDiv" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">Tool/Data</h5>
                <a class="waves-effect btn-flat right" style="margin-top: -30px;" ng-click="tools_button_cancel_clicked()">Cancel</a>
            </div>
        </div>
        <div style="margin: 20px;">
            <div class="left-align" style="margin-left: 10px; margin-right: 15px;">
                <p>
                    <h5>
                        <span ng-bind="tools_info_name"></span>/<span ng-bind="tools_info_version"></span><span
                            ng-show="!tools_info_editable">/<span ng-bind="tools_info_edit"></span></span>
                    </h5>
                    <small class="form-text text-muted" ng-show="!tools_info_editable">
                        <a ng-click="interlink({type: 'u', username: tool_info_username})">u/<span ng-bind="tool_info_username"></span></a>, created at <span
                            ng-bind="tool_info_created_at"></span>
                        <span ng-show="tools_info_forked_from">, forked from <a href
                                ng-click="tools_search_show_item(tools_info_forked_from)">t/<span
                                    ng-bind="tools_info_forked_from | tool_label"></span></a></span>
                    </small>
                </p>
                <!-- Buttons -->
                <div class="row right-align">
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Save" ng-click="tool_create_save_pressed()" ng-show="tools_info_editable"><i
                            class="material-icons">save</i></a>
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Fork" ng-click="tool_info_fork_pressed()" ng-show="!tools_info_editable"
                        ng-class="{'disabled': !username}"><i class="material-icons">call_split</i></a>
                </div>
            </div>

            <ul id="createToolDataAccordion" class="collapsible expandable faster" style="margin-bottom:0px;">
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------------ General ------------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="toolsDataGeneral">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        General
                    </div>
                    <div class="collapsible-body">
                        <form class="col s12" ng-show="tools_info_editable">
                            <div class="row">
                                <div class="input-field col s12 m4 grid-s12-m4-l4">
                                    <input id="generalName" type="text" class="validate tooltipped" 
                                        data-tooltip="Name of the tool or dataset. Available characters: a-z, A-Z, 0-9, _"
                                        ng-model="tools_info_name"
                                        ng-disabled="tools_info_forked_from">
                                    <label for="generalName">Name</label>
                                </div>
                                <div class="input-field col s12 m4 grid-s12-m4-l4">
                                    <input id="generalVersion" type="text" class="validate tooltipped"
                                        data-tooltip="Version of the tool or dataset. Available characters: a-z, A-Z, 0-0, _, ."
                                        ng-model="tools_info_version" ng-disabled="tools_info_forked_from">
                                    <label for="generalVersion">Version</label>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12">
                                    <input id="generalWebsite" type="text" class="validate tooltipped" 
                                        data-tooltip="Optional. Websites should start from http://, https:// or ftp:// "
                                        ng-model="tool_website">
                                    <label for="generalWebsite">Website</label>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12">
                                    <textarea id="generalDescription" class="validate materialize-textarea tooltipped"
                                        data-tooltip="General tool/data description. You can use markdown"
                                        ng-model="tool_description"></textarea>
                                    <label for="generalDescription">Description</label>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12" ng-show="tools_info_forked_from">
                                    <textarea id="generalEditSummary" class="validate materialize-textarea"
                                        ng-model="tool_changes"></textarea>
                                    <label for="generalEditSummary">Edit Summary</label>
                                </div>
                                <div class="input-field col s12 m12 grid-s12-m12-l12">
                                    <div id="toolChips" class="input-field chips left-align" style="margin:0px">
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div ng-show="!tools_info_editable">
                            {% verbatim %}
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Website:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><a ng-href="{{ tool_website }}" target="_blank"><span ng-bind="tool_website"></span></a></div>
                            </div>
                            {% endverbatim %}
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Description:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span
                                        ng-bind-html="tool_description_html"></span></div>
                            </div>
                            <div class="row left-align" ng-show="tool_changes">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Edit Summary:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="tool_changes"></span></div>
                            </div>
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Tags:</b></div>
                                <span class="new badge left" data-badge-caption="" style="margin-left: 5px;"
                                    ng-repeat="keyword in tool_keywords"><span ng-bind="keyword"></span></span>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- -------------------------------- Dependencies ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="toolsDataDependencies">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">format_list_bulleted</i>
                        Dependencies
                    </div>
                    <div class="collapsible-body">
                        <div class="row left-align" ng-show="tools_info_editable">
                            <strong>Drop here a tool from the Tools/Data search tree, in order to add it as a dependency. Right click to
                                remove it. The dependent Tools/Data, will be installed each time this Tool/Data is installed.</strong>
                        </div>
                        <div class="row" ng-show="!tools_info_editable">
                            <strong>Tool Dependency Tree</strong>
                        </div>
                        <div class="row left-align">
                            <div id="tools_dep_jstree_id" js-tree="tools_dep_jstree_config"
                                should-apply="tools_search_jstree_config_apply()" ng-model="tools_dep_jstree_model"
                                tree="tools_dep_jstree"></div>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- -------------------------------- Installation ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="toolsDataInstallation">
                    <div class="collapsible-header customCollapsibleHeader">
                        <i class="material-icons arrow left">keyboard_arrow_right</i>
                        <i class="material-icons left">computer</i>
                        <span class="left">Installation</span>

                        <div ng-show="false">
                        {% verbatim %}
                        <small class="right"
                            ng-show="tool_info_validation_status=='Validated' || tool_info_validation_status=='Failed'">
                            <a id="installationSTDOUT"
                                href="tool_stdout/{{tools_info_name}}/{{tools_info_version}}/{{tools_info_edit}}/"
                                target="_blank" class="tooltipped" data-position="bottom" data-tooltip="Show STDOUT">
                                <i class="material-icons left" style="margin-right:0px;">open_in_new</i>
                            </a>
                        </small>
                        {% endverbatim %}
                        <small
                            ng-show="(!tools_info_editable) && (tool_info_validation_status=='Unvalidated' || tool_info_validation_status=='Validated' || tool_info_validation_status=='Failed')"
                            class="right" ng-click="tool_info_validate_pressed()"
                            style="padding-top:4px; margin-left:5px; margin-right:5px;z-index: 2;">
                            <a><span ng-show="tool_info_validation_status=='Validated'">re-</span>validate</a>
                        </small>

                        <small ng-show="tool_info_validation_created_at" class="text-muted right"
                            style="padding-top: 4px; margin-left: 5px; margin-right: 5px;">
                            <span ng-bind="tool_info_validation_created_at"></span>
                        </small>
                        <span ng-show="tool_info_validation_status=='Unvalidated'" class="new badge right"
                            style="margin-left: 5px;" data-badge-caption="Unvalidated"></span>
                        <span ng-show="tool_info_validation_status=='Queued'" class="new badge grey right"
                            style="margin-left: 5px;" data-badge-caption="Queued"></span>
                        <span ng-show="tool_info_validation_status=='Running'" class="new badge grey right"
                            style="margin-left: 5px;" data-badge-caption="Running"></span>
                        <span ng-show="tool_info_validation_status=='Failed'" class="new badge red right"
                            style="margin-left: 5px;" data-badge-caption="Failed"></span>
                        <span ng-show="tool_info_validation_status=='Validated'" class="new badge green right"
                            style="margin-left: 5px;" data-badge-caption="Validated"></span>

                        <a ng-show="!tools_info_editable" ng-click="tool_info_validate_refresh_pressed()"
                            id="installationRefreshBtn" class="waves-effect btn-flat btnCollapsible right"><i
                                class="material-icons" style="margin:0px;">refresh</i></a>

                        </div>
                    </div>
                    <div class="collapsible-body">
                        <!-- Hide Variables -->
                        <div class="row left-align">
                            <strong><a href ng-click="tools_var_jstree_id_show_clicked()"><span
                                        ng-show="tools_var_jstree_id_show">Hide</span><span
                                        ng-show="!tools_var_jstree_id_show">Show</span> variables from dependent
                                    tools</a></strong>
                            <div class="left-align" id="tools_var_jstree_id" js-tree="tools_var_jstree_config"
                                should-apply="tools_search_jstree_config_apply()" ng-model="tools_var_jstree_model"
                                tree="tools_var_jstree" ng-show="tools_var_jstree_id_show"></div>
                        </div>
                        <div class="row left-align" ng-show="!tools_info_editable">
                            Operating Systems: <!-- <span ng-bind="tool_os_choices.name"></span>  ### here --> 
                            <div ng-repeat="tool_os_choice in tool_os_choices"><span ng-bind="tool_os_choice.name"></span></div>
                        </div>
                        <!-- adding values to use it for dockerfile-->
                        <!--<div class="row" ng-show="tools_info_editable">
                            <div class="input-field col s12">
                                 <select>
                                    <optgroup label="Ubuntu">
                                        <option value="ubuntu:14.04">Ubuntu:14.04</option>
                                        <option value="ubuntu:16.04">Ubuntu:16.04</option>
                                    </optgroup>
                                    <optgroup label="Debian">
                                        <option value="jessie">Debian 8 (Jessie)</option>
                                        <option value="stretch">Debian 9 (Stretch)</option>
                                        <option value="buster">Debian 10 (Buster)</option>
                                    </optgroup>
                                </select> 
                                <select id="tool_os_choices_select" ng-model="tool_os_choices"
                                    ng-options="os.name group by os.group for os in os_choices"></select>
                                <label>Select Operating System</label>
                            </div>
                        </div>-->
                        <div class="row" ng-show="tools_info_editable">
                            <!-- adding values to use it for dockerfile-->
                            <div class="col s12 left-align">
                                <span>Select Operating Systems</span>
                                <!-- TODO add multiple -->
                                <select id="tool_os_choices_select" ng-model="tool_os_choices"
                                    ng-options="os.name group by os.group for os in os_choices" multiple></select>
                            </div>
                        </div>

                        <!-- Installation -->
                        <div class="row">
                            <h5>Installation Commands</h5>
                            <div id="tool_installation_editor"></div>
                        </div>
                        <!-- Validation -->
                        <div class="row">
                            <h5>Validation Commands</h5>
                            <div id="tool_validation_editor"></div>
                        </div>
                        <!-- Variables -->
                        <div class="row">
                            <h5>Variables</h5>
                            <div class="col s12">
                                <table class="centered highlight">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Value</th>
                                            <th>Description</th>
                                            <!--
                                                    <th>
                                                        <a class="waves-effect waves-light btn-small tooltipped green darken-1" style="padding-left: 7px; padding-right:7px" data-position="bottom"
                                                        data-tooltip="Add new variable"><i class="material-icons">add</i></a>
                                                    </th>
                                                    -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="x in tool_variables">
                                            <td><input type="text" placeholder="name" ng-model="x.name"
                                                    ng-disabled="!tools_info_editable"></td>
                                            <td><input type="text" placeholder="value" ng-model="x.value"
                                                    ng-disabled="!tools_info_editable"></td>
                                            <td><input type="text" placeholder="description" ng-model="x.description"
                                                    ng-disabled="!tools_info_editable">
                                            </td>
                                            <td>
                                                <a class="waves-effect waves-light btn-small tooltipped green darken-1"
                                                    style="padding-left: 7px; padding-right:7px" data-position="bottom"
                                                    data-tooltip="Add new variable" ng-click="tools_info_add_variable()"
                                                    ng-if="$last && x.name && x.value && x.description && tools_info_editable"><i
                                                        class="material-icons">add</i></a>
                                            </td>
                                            <td>
                                                <a class="waves-effect waves-light btn-small tooltipped red darken-1"
                                                    style="padding-left: 7px; padding-right:7px" data-position="bottom"
                                                    data-tooltip="Remove variable"
                                                    ng-click="tools_info_remove_variable($index)"
                                                    ng-if="(!$first) && tools_info_editable"><i
                                                        class="material-icons">remove</i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ---------------------------------- Statistics ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="toolsDataStatistics" ng-show="false">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">poll</i>
                        Statistics
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                            richardson
                            ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                            truck
                            quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a
                            bird
                            on
                            it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                            keffiyeh
                            helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                            Ad
                            vegan
                            excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw
                            denim
                            aesthetic synth nesciunt you probably haven't heard of them accusamus labore
                            sustainable VHS.
                            <table class="highlight centered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Item Name</th>
                                        <th>Item Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alvin</td>
                                        <td>Eclair</td>
                                        <td>$0.87</td>
                                    </tr>
                                    <tr>
                                        <td>Alan</td>
                                        <td>Jellybean</td>
                                        <td>$3.76</td>
                                    </tr>
                                    <tr>
                                        <td>Jonathan</td>
                                        <td>Lollipop</td>
                                        <td>$7.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ---------------------------------- Discussion ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="toolsDataDiscussion" ng-show="!tools_info_editable">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">forum</i>
                        Discussion
                    </div>
                    <div class="collapsible-body left-align">
                        {% include "app/qa.html" with qa_type="tool" %}
                    </div>
                </li>
            </ul>
        </div>
    </div>


    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- --------------------------------------------------- Edit Workflow Right Panel ------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div id="workflowsRightPanel" class="faster" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">Workflow</h5>
                <a class="waves-effect btn-flat right" style="margin-top: -30px;" ng-click="workflows_button_cancel_clicked()">Cancel</a>
            </div>
        </div>
        <div style="margin: 20px;">
            <div class="left-align" style="margin-left: 10px; margin-right: 15px;">
                <p ng-show="!workflows_info_editable">
                    <h5>
                        <span ng-bind="workflow_info_name"></span><span ng-show="!workflows_info_editable">/<span
                                ng-bind="workflow_info_edit"></span></span>
                    </h5>
                    <small class="form-text text-muted" ng-show="!workflows_info_editable">
                        <a ng-click="interlink({type: 'u', username: workflows_info_username})">u/<span ng-bind="workflows_info_username"></span></a>
                        <span>, created at <span ng-bind="workflow_info_created_at"></span></span>
                        <span ng-show="workflow_info_forked_from">, forked from <a href
                                ng-click="workflows_search_show_item(workflow_info_forked_from)">w/<span
                                    ng-bind="workflow_info_forked_from | workflow_label"></span></a></span>
                    </small>
                </p>
                <!-- Buttons -->
                <div class="row right-align" style="margin-bottom: 0px;">
                    <!-- <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Run" ng-click="workflow_info_run_pressed()"
                        ng-disabled="workflows_info_editable">Run</a> -->
                    <a class="dropdown-trigger btn" data-target='downloadDropdown' style="margin-bottom:2px"
                        ng-disabled="workflows_info_editable">Download</a>
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Fit" ng-click="workflow_info_fit_pressed()">Fit</a>
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Clear" ng-click="workflow_info_clear_pressed()"
                        ng-disabled="!workflows_info_editable">Clear</a>
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Save" ng-click="workflows_create_save_pressed()"
                        ng-show="workflows_info_editable"><i class="material-icons">save</i></a>
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Fork" ng-click="workflows_info_fork_pressed()" ng-show="!workflows_info_editable"
                        ng-class="{'disabled': !username}"><i class="material-icons">call_split</i></a>
                    <!-- Download Dropdown -->
                    <ul id='downloadDropdown' class='dropdown-content'>
                        <li><a ng-click="workflow_info_run_pressed('BASH')">BASH executable</a></li>
                        <li><a ng-click="workflow_info_run_pressed('JSON')">JSON</a></li>
                    </ul>
                </div>
                <div class="left-align" style="margin-top: 5px; margin-bottom: 5px;">
                    See <a ng-click="documenation_navbar_clicked()">Documentation</a> on how to execute a workflow
                </div>
            </div>

            <!-- --------------------------------------------------------------------------------------- -->
            <!-- ---------------------------------- General -------------------------------------------- -->
            <!-- --------------------------------------------------------------------------------------- -->
            <ul id="workflowsRightPanelGeneralAccordion" class="collapsible expandable faster" style="margin-top:0px;">
                <li id="workflowRightPanelGeneral">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        General
                    </div>
                    <div class="collapsible-body">
                        <form class="col s12">
                            <div class="row" ng-show="workflows_info_editable">
                                <div class="input-field col s12 m12 grid-s12-m12-l12">
                                    <input id="generalWorkflowName" type="text" class="validate"
                                        ng-model="workflow_info_name" ng-change="workflow_info_name_changed()"
                                        ng-disabled="workflow_info_forked_from">
                                    <label for="generalWorkflowName" required>Name</label>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12">
                                    <input id="workflowsGeneralWebsite" type="text" class="validate"
                                        ng-model="workflow_website">
                                    <label for="workflowsGeneralWebsite">Website</label>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12">
                                    <textarea id="workflowsGeneralDescription" class="validate materialize-textarea"
                                        ng-model="workflow_description"></textarea>
                                    <label for="workflowsGeneralDescription">Description</label>
                                </div>
                                <div class="input-field col s12 m12 grid-s12-m12-l12">
                                    <div id="workflowChips" class="input-field chips left-align" style="margin:0px">
                                    </div>
                                </div>
                                <div class="input-field col s12 grid-s12-m12-l12" ng-show="workflow_info_forked_from">
                                    <textarea id="workflowsGeneralEditSummary" class="validate materialize-textarea"
                                        ng-model="workflow_changes" required></textarea>
                                    <label for="workflowsGeneralEditSummary">Edit Summary</label>
                                </div>
                            </div>
                            <div class="row" ng-show="!workflows_info_editable">
                                {% verbatim %}
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Website:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><a ng-href="{{ workflow_website }}" target="_blank"><span ng-bind="workflow_website"></span></a>
                                    </div>
                                </div>
                                {% endverbatim %}
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Description:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span
                                            ng-bind-html="workflow_description_html"></span></div>
                                </div>
                                <div class="row left-align" ng-show="workflow_changes">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Edit Summary:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="workflow_changes"></span>
                                    </div>
                                </div>
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Tags:</b></div>
                                    <span class="new badge left" data-badge-caption="" style="margin-left: 5px;"
                                        ng-repeat="keyword in workflow_keywords"><span ng-bind="keyword"></span></span>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
            <!-- --------------------------------------------------------------------------------------- -->
            <!-- ------------------------------------ Graph -------------------------------------------- -->
            <!-- --------------------------------------------------------------------------------------- -->
            <!--
                <div class="row">
                    <div id="d3wf"></div>
                </div>
                -->
            <div class="row">
                <div id="cywf"></div>
            </div>
            <hr>
            <ul id="editWorkflowAccordion" class="collapsible expandable faster" style="margin-top:0px;">
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------- Step Workflow ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="workflowRightPanelStep">
                    <!-- class="disabled" -->
                    <div class="collapsible-header customCollapsibleHeader">
                        <i class="material-icons arrow left">keyboard_arrow_right</i>
                        <i class="material-icons left">linear_scale</i>
                        <span class="left" style="margin-right: 10px;">Step</span>
                        <!-- <a id="workflowStepPlusBtn" class="waves-effect btn green plusBtn right tooltipped"
                            data-position="left" data-tooltip="Add Step" ng-click="workflow_info_add_step_clicked()" ng-show="workflows_info_editable"><i class="material-icons plusIcon">add</i></a> -->
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            <form class="col s12">
                                <div class="col s12" ng-show="workflow_step_error_message">
                                    <div class="card-panel orange lighten-1 center-align" style="padding:10px">
                                        <span class="white-text" ng-bind="workflow_step_error_message"></span>
                                    </div>
                                </div>
                                <div class="input-field col s10" ng-show="workflows_info_editable">
                                    <input id="editWorkflowName" type="text" class="validate"
                                        ng-model="workflows_step_name">
                                    <label for="editWorkflowName">Name</label>
                                </div>
                                <div class="input-field col s10 left-align" ng-show="!workflows_info_editable">
                                    <b>Name: </b><span ng-bind="workflows_step_name"></span>
                                </div>
                                <div class="input-field col s2" ng-show="workflows_info_editable">
                                    <label>
                                        <input type="checkbox" ng-model="workflows_step_main"
                                            ng-disabled="!workflows_info_editable" />
                                        <span>Main</span>
                                    </label>
                                </div>
                                <div class="input-field col s2" ng-show="!workflows_info_editable">
                                    <b>Main:</b><span ng-show="workflows_step_main">Yes</span><span
                                        ng-show="!workflows_step_main">No</span>
                                </div>
                                <div class="row col s12" id="workflow_step_editor"></div>
                                <!-- 
                                    <div class="input-field col s12">
                                        <textarea id="editWorkflowDescription"
                                            class="validate materialize-textarea" ng-model="workflows_step_description"></textarea>
                                        <label for="editWorkflowDescription">Description</label>
                                    </div>
                                    -->
                                <div class="row col s12">
                                    <div class="right-align">
                                        <a class="waves-effect waves-light btn" style="margin:2px"
                                            ng-show="workflows_info_editable"
                                            ng-click="workflow_info_add_step_clicked()">Clear</a>
                                        <a class="waves-effect waves-light btn" style="margin:2px"
                                            ng-show="workflows_info_editable"
                                            ng-click="workflow_step_delete()">Delete</a>
                                        <a class="waves-effect waves-light btn" style="margin:2px"
                                            ng-click="workflow_step_add()" ng-show="workflows_info_editable"><span
                                                ng-bind="workflow_step_add_update_label"></span></a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ---------------------------- Inputs / Outputs ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="workflowRightPanelInputsOutputs">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">swap_horiz</i>
                        Inputs/Outputs
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            <h5>Variables</h5>
                            <div class="col s12">
                                <table class="centered highlight">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Description</th>
                                            <th>Input/Output</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% verbatim %}
                                        <tr ng-repeat="x in workflow_input_outputs track by $index">
                                            <td><input type="text" placeholder="Name" ng-model="x.name"
                                                    ng-disabled="(!$last) || (!workflows_info_editable)"></td>
                                            <td><input type="text" placeholder="Description" ng-model="x.description"
                                                    ng-disabled="(!$last) || (!workflows_info_editable)">
                                            </td>

                                            <!-- Old switch 
                                            <td class="switch">
                                                <label>
                                                    IN
                                                    <input type="checkbox" ng-model="x.out" style="display:none"
                                                        ng-disabled="(!$last) || (!workflows_info_editable)">
                                                    <span class="lever"></span>
                                                    OUT
                                                </label>
                                            </td>
                                            -->

                                            <!-- New switch -->
                                            <td>
                                                <div class="switch-custom" id="{{'switchCustom'+$index}}">
                                                    <input type="radio" class="switch-input" name="{{'switchName'+$index}}" ng-disabled="(!$last) || (!workflows_info_editable)" ng-attr-id="{{'switchIn'+$index}}" ng-checked="!x.out" ng-click="workflow_input_output_toggle($index)">
                                                    <label for="{{'switchIn'+$index}}" class="switch-label switch-label-off">IN</label>
                                                    <input type="radio" class="switch-input" name="{{'switchName'+$index}}" ng-disabled="(!$last) || (!workflows_info_editable)" ng-attr-id="{{'switchOut'+$index}}" ng-checked="x.out" ng-click="workflow_input_output_toggle($index)">
                                                    <label for="{{'switchOut'+$index}}" class="switch-label switch-label-on">OUT</label>
                                                    <span class="switch-selection"></span>
                                                </div>
                                            </td>
                                            
                                            <td>
                                                <!--add: ng-if="$last" removed  , remove: (!$first) removed
                                                -->
                                                <a class="waves-effect waves-light btn-small tooltipped green darken-1"
                                                    style="padding-left: 7px; padding-right:7px" data-position="bottom"
                                                    data-tooltip="Add new variable"
                                                    ng-if="$last && x.name && x.description && workflows_info_editable" 
                                                    ng-click="workflow_step_add_input_output()"><i
                                                        class="material-icons">add</i></a>
                                            </td>
                                            <td>
                                                <a class="waves-effect waves-light btn-small tooltipped red darken-1"
                                                    style="padding-left: 7px; padding-right:7px" data-position="bottom"
                                                    data-tooltip="Remove variable"
                                                    ng-if="(!$last) && workflows_info_editable"
                                                    ng-click="workflow_step_remove_input_output($index)"><i
                                                        class="material-icons">remove</i></a>
                                            </td>
                                        </tr>
                                        {% endverbatim %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------ Statistics Workflow ------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="workflowStatistics" ng-show="false">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">poll</i>
                        Statistics
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                            richardson
                            ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                            truck
                            quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a
                            bird
                            on
                            it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                            keffiyeh
                            helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                            Ad
                            vegan
                            excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw
                            denim
                            aesthetic synth nesciunt you probably haven't heard of them accusamus labore
                            sustainable VHS.
                            <table class="highlight centered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Item Name</th>
                                        <th>Item Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alvin</td>
                                        <td>Eclair</td>
                                        <td>$0.87</td>
                                    </tr>
                                    <tr>
                                        <td>Alan</td>
                                        <td>Jellybean</td>
                                        <td>$3.76</td>
                                    </tr>
                                    <tr>
                                        <td>Jonathan</td>
                                        <td>Lollipop</td>
                                        <td>$7.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ---------------------------------- Discussion ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="workflowDiscussion" ng-show="!workflows_info_editable">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">forum</i>
                        Discussion
                    </div>
                    <div class="collapsible-body left-align">
                        {% include "app/qa.html" with qa_type="workflow" %}
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------ Reports Right Panel ---------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="faster" id="reportsRightPanel" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">Report</h5>
            </div>
        </div>
        <div style="margin: 20px;">
            <div class="left-align" style="margin-left: 10px; margin-right: 15px;">
                <div class="row left-align">
                    <div class="col s2">
                        <h5>Workflow:</h5>
                    </div>
                    <div class="col s6">
                        <h5>
                            <a ng-click="interlink({type: 'w', name: report_workflow_name, edit:report_workflow_edit})">w/<span ng-bind="report_workflow_name"></span>/<span ng-bind="report_workflow_edit"></span></a>
                        </h5>
                    </div>
                    <div class="col s4">
                        <h5>Run:<span ng-bind="report_workflow_run"></span></h5>
                    </div>
                </div>
                <small class="form-text text-muted">
                    <a ng-click="interlink({type: 'u', username: report_username})">u/<span ng-bind="report_username"></span></a>, created at: <span ng-bind="report_created_at"></span>
                </small>
            </div>
            <ul id="reportsRightPanelAccordion" class="collapsible expandable popout faster">
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------------ General ------------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                
                <!--
                <li id="reportsGeneral">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        General
                    </div>
                    <div class="collapsible-body">
                        <form class="col s12">
                            <div class="row left-align">
                                <ul>
                                    <li ng-repeat="token in report_tokens track by token.token">
                                        <span ng-bind="token.status"></span>, <span ng-bind="token.created_at"></span><a
                                            ng-click="nodeAnimation_public(token.node_anim_params)">show</a>
                                    </li>
                                </ul>
                            </div>
                        </form>
                    </div>
                </li>
                -->

				<!-- TIMELINE -->
				<li id="reportsTimeline">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        Timeline
                    </div>
                    <div class="collapsible-body">
                        <form class="col s12">
                            <div class="row left-align">
							<div id="reportTimeline"></div>
							<!--
                                <ul>
                                    <li ng-repeat="token in report_tokens track by token.token">
                                        <span ng-bind="token.status"></span>, <span ng-bind="token.created_at"></span><a
                                            ng-click="nodeAnimation_public(token.node_anim_params)">show</a>
                                    </li>
                                </ul>
								-->
                            </div>
                        </form>
                    </div>
                </li>		
				
                <div class="row">
                    <div id="cyrep"></div>
                </div>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------------ Statistics ------------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="reportsStatistics" ng-show="false">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">poll</i>
                        Statistics
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                            richardson
                            ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                            truck
                            quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a
                            bird
                            on
                            it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                            keffiyeh
                            helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                            Ad
                            vegan
                            excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw
                            denim
                            aesthetic synth nesciunt you probably haven't heard of them accusamus labore
                            sustainable VHS.
                            <table class="highlight centered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Item Name</th>
                                        <th>Item Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alvin</td>
                                        <td>Eclair</td>
                                        <td>$0.87</td>
                                    </tr>
                                    <tr>
                                        <td>Alan</td>
                                        <td>Jellybean</td>
                                        <td>$3.76</td>
                                    </tr>
                                    <tr>
                                        <td>Jonathan</td>
                                        <td>Lollipop</td>
                                        <td>$7.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------- References Right Panel ------------------------------------------------------------------------ -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="faster" id="referencesRightPanel" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">Reference</h5>
                <a class="waves-effect btn-flat right" style="margin-top: -30px;" ng-click="references_button_cancel_clicked()">Cancel</a>
            </div>
        </div>
        <div style="margin: 20px;">
            <div class="left-align" style="margin-left: 10px; margin-right: 15px;">
                <h5>
                    <span ng-bind="references_name"></span>
                </h5>
                <div ng-show="!references_info_editable">
                    <small class="form-text text-muted">
                        <!-- <span ng-bind="tool_info_username"></span>
                            <span ng-show="!tools_info_editable">, created at <span
                                    ng-bind="tool_info_created_at"></span></span>
                            <span ng-show="tools_info_forked_from">, forked from <a href
                                    ng-click="tools_search_show_item(tools_info_forked_from)"><span
                                        ng-bind="tools_info_forked_from | tool_label"></span></a></span>
                            <span>USED IN 86 WFs</span> -->
                        <a ng-click="interlink({type: 'u', username: references_username})">u/<span ng-bind="references_username"></span></a>
                        <span>, created at <span ng-bind="references_created_at"></span></span>
                    </small>
                    <div class="card blue-grey darken-1">
                        <div class="card-content" style="background-color: #f0f8ff;">
                            <p><span ng-bind-html="references_formatted"></span></p>
                        </div>
                    </div>
                </div>
                <!-- Buttons -->
                <div class="row right-align">
                    <!-- <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                            data-tooltip="Save" ng-click="tool_create_save_pressed()" ng-show="tools_info_editable"><i
                                class="material-icons">save</i></a> -->
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Save" ng-click="references_create_save_pressed()"
                        ng-show="references_info_editable"><i class="material-icons">save</i></a>
                </div>
            </div>

            <ul id="referencesRightPanelAccordion" class="collapsible expandable popout faster">
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------------ General ------------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="referencesGeneral">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        General
                    </div>
                    <div class="collapsible-body">
                        <div class="row" ng-show="references_info_editable">
                            <form class="col s12">
                                <div class="input-field">
                                    <input id="referencesGeneralName" type="text" class="validate"
                                        ng-model="references_name" required>
                                    <label for="referencesGeneralName">Name</label>
                                </div>
                                <div class="input-field">
                                    <input id="referencesGeneralTitle" type="text" class="validate"
                                        ng-model="references_title" required>
                                    <label for="referencesGeneralTitle">Title</label>
                                </div>
                                <div class="input-field">
                                    <input id="referencesGeneralURL" type="text" class="validate"
                                        ng-model="references_url" required>
                                    <label for="referencesGeneralURL">URL </label>
                                </div>
                                <div class="row" style="margin-bottom: 0px;">
                                    <div class="input-field col s6" style="display: table; width:100%">
                                        <input id="referencesGeneralDOI" type="text" class="validate" ng-model="references_doi">
                                        <label for="referencesGeneralDOI">DOI</label>
                                        <span style="display: table-cell; width:120px;">
                                            <a class="waves-effect waves-light btn-small" ng-click="references_process_doi_pressed()">Process DOI</a>
                                        </span>
                                    </div>
                                </div>
                                <div class="input-field">
                                    <textarea id="referencesGeneralNotes" class="validate materialize-textarea"
                                        ng-model="references_notes"></textarea>
                                    <label for="referencesGeneralNotes">Notes</label>
                                </div>
                                <div class="input-field" style="margin-bottom: 0px;">
                                    <textarea id="referencesGeneralBIBTEX" class="validate materialize-textarea"
                                        ng-model="references_BIBTEX"></textarea>
                                    <label for="referencesGeneralBIBTEX">BIBTEX</label>
                                </div>
                                <div class="right-align">
                                    <a class="waves-effect waves-light btn-small"
                                        ng-click="references_generate_clicked()">Process BIBTEX</a>
                                </div>
                                <div class="left-align">
                                    <h5>Formatted Reference:</h5>
                                    <p><span ng-bind-html="references_formatted"></span>
                                    </p>
                                </div>
                            </form>
                        </div>
                        <div class="row" ng-show="!references_info_editable">
                            <div class="col s12">
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Name:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="references_name"></span>
                                    </div>
                                </div>
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Title:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="references_title"></span>
                                    </div>
                                </div>
                                {% verbatim %}
                                <!-- ng-href="{{ trust_url(references_url) }}" -->
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>URL:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><a 
                                        ng-href="{{ references_url }}" 
                                        target="_blank"><span ng-bind="references_url"></span></a>
                                    </div>
                                </div>
                                {% endverbatim %}
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>DOI:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="references_doi"></span>
                                    </div>
                                </div>
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>Notes:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="references_notes"></span>
                                    </div>
                                </div>
                                <div class="row left-align">
                                    <div class="col s12 m3 grid-s12-m3-l3"><b>BIBTEX:</b></div>
                                    <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="references_BIBTEX"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ---------------------------------- Statistics ----------------------------------------- -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="referencesStatistics" ng-show="false">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">poll</i>
                        Statistics
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                            richardson
                            ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                            truck
                            quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a
                            bird
                            on
                            it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                            keffiyeh
                            helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                            Ad
                            vegan
                            excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw
                            denim
                            aesthetic synth nesciunt you probably haven't heard of them accusamus labore
                            sustainable VHS.
                            <table class="highlight centered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Item Name</th>
                                        <th>Item Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alvin</td>
                                        <td>Eclair</td>
                                        <td>$0.87</td>
                                    </tr>
                                    <tr>
                                        <td>Alan</td>
                                        <td>Jellybean</td>
                                        <td>$3.76</td>
                                    </tr>
                                    <tr>
                                        <td>Jonathan</td>
                                        <td>Lollipop</td>
                                        <td>$7.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- USERS RIGHT PANEL -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------- Users Right Panel ----------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="faster" id="userDataDiv" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">User</h5>
            </div>
        </div>
        <div style="margin: 20px;">
            <ul id="userDataAccordion" class="collapsible expandable popout faster">
                <!-- --------------------------------------------------------------------------------------- -->
                <!-- ------------------------------------ General ------------------------------------------ -->
                <!-- --------------------------------------------------------------------------------------- -->
                <li id="usersDataGeneral">
                    <div class="collapsible-header">
                        <i class="material-icons arrow">keyboard_arrow_right</i>
                        <i class="material-icons">info</i>
                        User Info
                    </div>
                    <div class="collapsible-body">
                        <form class="col s12">
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>First Name:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="user_firstname"></span></div>
                            </div>
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Second Name:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="user_lastname"></span></div>
                            </div>
                            {% verbatim %}
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Website:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><a 
                                        ng-href="{{user_website}}"
                                        target="_blank"><span ng-bind="user_website"></span></a></div>
                            </div>
                            {% endverbatim %}
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Affiliation:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="user_affiliation"></span>
                                </div>
                            </div>
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Member Since:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="user_created_at"></span></div>
                            </div>
                            <div class="row left-align">
                                <div class="col s12 m3 grid-s12-m3-l3"><b>Info:</b></div>
                                <div class="col s12 m9 grid-s12-m9-l9"><span ng-bind="user_publicinfo"></span></div>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- END OF USER RIGHT PANEL -->

    <!-- Q&A RIGHT PANEL -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------- Q & A Right Panel ----------------------------------------------------------------------------- -->
    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="faster" id="QARightPanel" style="display: none;">
        <div class="card blue-grey lighten-4 rightPanelTitleCard">
            <div class="card-content rightPanelTitleContent">
                <h5 class="rightPanelTitleHeader">Q & A</h5>
                <a class="waves-effect btn-flat right" style="margin-top: -30px;" ng-click="qas_button_cancel_clicked()">Cancel</a>
            </div>
        </div>
        <div style="margin: 20px;">
            <!-- TEMPLATE START -->
            <!-- <div class="row" style="margin-left: 10px; margin-right: 15px;">
                <div class="row card-panel left-align" style="padding:5px; margin-bottom: 2px;">
                    <div class="valign-wrapper">
                        <img src="/static/app/images/konstantina/img_avatar.png" alt="" class="circle imgAvatar">
                        <small>Asked by <a href="#">Kona</a> on April 19 at 18:40</small>
                    </div>
                    <div>
                        <h5 style="margin-top:9px; margin-bottom:9px;">lskaflafkalfksdlfklfkf sldfksldfkslfks
                            sflskflkfslfklf lsfslfkslfkl
                            adkadkjdksajdkad?
                        </h5>
                        <p>ksdjkfjfkjskfjkfjdfk fksjfksjfkfksfjskfj dksksjfkdjf dfkdfjdkfj kfdkfjdkfj dkfdjdkfjdkf
                            sfksdjksjdkfdkfd fdkfdkfjdfkdjfk</p>
                    </div>
                </div>
                <div class="row right-align">
                    <a class="waves-effect waves-light btn-small" href="">Add Comment</a>
                </div>
            </div> -->
            <!-- TEMPLATE END -->


            <div class="left-align" style="margin-left: 10px; margin-right: 15px;">
                <div class="row" ng-show="qa_info_editable">
                    <form class="col s12">
                        <div class="input-field">
                            <div class="input-field">
                                <input id="qatitle" type="text" class="validate" ng-model="qa_title">
                                <label for="qatitle">Title</label>
                            </div>

                            <div class="input-field">
                                <textarea id="comment" class="validate materialize-textarea"
                                    ng-model="qa_comment"></textarea>
                                <label for="comment">Comment</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="row" ng-show="!qa_info_editable">
                    <div class="row card-panel left-align" style="padding:5px; margin-bottom: 2px;">
                        <div class="valign-wrapper">
                            <img src="/static/app/images/konstantina/img_avatar.png" alt=""
                                class="circle avatarForumQuestion">
                            <small>Asked by <a ng-click="interlink({type: 'u', username: qa_username})">u/<span ng-bind="qa_username"></span></a> on <span ng-bind="qa_created_at"></span><span>, </span><a ng-click="interlink({type: 'c', id: qa_comment_id})">c/<span ng-bind="qa_comment_id"></span></a></small>
                        </div>
                        <div>
                            <h5 style="margin-top:9px; margin-bottom:9px;"><span ng-bind-html="qa_title"></span></h5>
                            <p><span ng-bind-html="qa_comment_html"></span></p>
                        </div>
                    </div>
                    <div class="row right-align" style="margin-top:15px; margin-bottom: 15px;" ng-show="!qa_show_new_comment">
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_add_comment_button_pressed()">Add Comment</a>
                    </div>
                    <div class="input-field" ng-show="qa_show_new_comment">
                        <textarea class="validate" ng-model="qa_current_comment"></textarea>
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_comment_save_button_pressed()">Save</a>
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_comment_cancel_button_pressed()">Cancel</a>
                    </div>

                    <!-- <div class="row left-align">
                        <b><span ng-bind="qa_title"></span></b>
                    </div>


                    <div class="row left-align">
                        <span ng-bind-html="qa_comment_html"></span>
                    </div>

                    <div class="row right-align">
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_add_comment_button_pressed()">Add Comment</a>
                    </div>

                    <div class="input-field" ng-show="qa_show_new_comment">
                        <textarea class="validate" ng-model="qa_current_comment"></textarea>
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_comment_save_button_pressed()">Save</a>
                        <a class="waves-effect waves-light btn-small" href=""
                            ng-click="qa_comment_cancel_button_pressed()">Cancel</a>
                    </div> -->

                    <ul class="collection">
                        <li class="collection-item" ng-repeat="post in qa_thread track by post.id">
                            <div class="valign-wrapper">
                                <img src="/static/app/images/konstantina/img_avatar.png" alt=""
                                    class="circle avatarForumReply">
                                <small>Replied by <a ng-click="interlink({type: 'u', username: post.username})">u/<span ng-bind="post.username"></span></a> on <span ng-bind="post.created_at"></span><span></small>
                            </div>
                            <span ng-bind-html="post.comment_html"></span>
                            <a class="waves-effect btn-flat qaReplyBtn" href=""
                                ng-click="qa_reply_button_clicked(post.id)"><u>Reply</u></a>
                            <div class="input-field" ng-show="post.replying">
                                <textarea class="validate" ng-model="qa_current_reply"></textarea>
                                <a class="waves-effect waves-light btn-small" href=""
                                    ng-click="qa_reply_save_button_pressed(post.id, qa_current_reply)">Save</a>
                                <a class="waves-effect waves-light btn-small" href=""
                                    ng-click="qa_reply_cancel_button_pressed(post.id)">Cancel</a>
                            </div>
                            <ul class="collection">
                                <li class="collection-item" ng-repeat="post2 in post.children track by post2.id">
                                    <div class="valign-wrapper">
                                        <img src="/static/app/images/konstantina/img_avatar.png" alt=""
                                            class="circle avatarForumReply">
                                        <small>Replied by <a ng-click="interlink({type: 'u', username: post2.username})">u/<span ng-bind="post2.username"></span></a> on <span ng-bind="post2.created_at"></span><span></small>
                                    </div>
                                    <span ng-bind-html="post2.comment_html"></span>
                                    <a class="waves-effect btn-flat qaReplyBtn" href=""
                                        ng-click="qa_reply_button_clicked(post2.id)"><u>Reply</u></a>
                                    <div class="input-field" ng-show="post2.replying">
                                        <textarea class="validate" ng-model="qa_current_reply"></textarea>
                                        <a class="waves-effect waves-light btn-small" href=""
                                            ng-click="qa_reply_save_button_pressed(post2.id, qa_current_reply)">Save</a>
                                        <a class="waves-effect waves-light btn-small" href=""
                                            ng-click="qa_reply_cancel_button_pressed(post2.id)">Cancel</a>
                                    </div>
                                    <ul class="collection">
                                        <li class="collection-item"
                                            ng-repeat="post3 in post2.children track by post3.id">
                                            <div class="valign-wrapper">
                                                <img src="/static/app/images/konstantina/img_avatar.png" alt=""
                                                    class="circle avatarForumReply">
                                                <small>Replied by <a ng-click="interlink({type: 'u', username: post3.username})">u/<span ng-bind="post3.username"></span></a> on <span ng-bind="post3.created_at"></span><span></small>
                                            </div>
                                            <span ng-bind-html="post3.comment_html"></span>
                                            <a class="waves-effect btn-flat qaReplyBtn" href=""
                                                ng-click="qa_reply_button_clicked(post3.id)"><u>Reply</u></a>
                                            <div class="input-field" ng-show="post3.replying">
                                                <textarea class="validate" ng-model="qa_current_reply"></textarea>
                                                <a class="waves-effect waves-light btn-small" href=""
                                                    ng-click="qa_reply_save_button_pressed(post3.id, qa_current_reply)">Save</a>
                                                <a class="waves-effect waves-light btn-small" href=""
                                                    ng-click="qa_reply_cancel_button_pressed(post3.id)">Cancel</a>
                                            </div>
                                            <ul class="collection">
                                                <li class="collection-item"
                                                    ng-repeat="post4 in post3.children track by post4.id">
                                                    <div class="valign-wrapper">
                                                        <img src="/static/app/images/konstantina/img_avatar.png" alt=""
                                                            class="circle avatarForumReply">
                                                        <small>Replied by <a ng-click="interlink({type: 'u', username: post4.username})">u/<span ng-bind="post4.username"></span></a> on <span ng-bind="post4.created_at"></span><span></small>
                                                    </div>
                                                    <span ng-bind-html="post4.comment_html"></span>
                                                    <a class="waves-effect btn-flat qaReplyBtn" href=""
                                                        ng-click="qa_reply_button_clicked(post4.id)"><u>Reply</u></a>
                                                    <div class="input-field" ng-show="post4.replying">
                                                        <textarea class="validate"
                                                            ng-model="qa_current_reply"></textarea>
                                                        <a class="waves-effect waves-light btn-small" href=""
                                                            ng-click="qa_reply_save_button_pressed(post4.id, qa_current_reply)">Save</a>
                                                        <a class="waves-effect waves-light btn-small" href=""
                                                            ng-click="qa_reply_cancel_button_pressed(post4.id)">Cancel</a>
                                                    </div>
                                                    <ul class="collection">
                                                        <li class="collection-item"
                                                            ng-repeat="post5 in post4.children track by post5.id">
                                                            <div class="valign-wrapper">
                                                                <img src="/static/app/images/konstantina/img_avatar.png"
                                                                    alt="" class="circle avatarForumReply">
                                                                <small>Replied by <a ng-click="interlink({type: 'u', username: post5.username})">u/<span ng-bind="post5.username"></span></a> on <span ng-bind="post5.created_at"></span><span></small>
                                                            </div>
                                                            <span ng-bind-html="post5.comment_html"></span>
                                                            <!-- We allow for 5 levels of comment nesting -->
                                                            <!--
                                                                        <button ng-click="qa_reply_button_clicked(post5.id)">Reply</button>
                                                                        <div class="input-field" ng-show="post5.replying">
                                                                            <textarea class="validate" ng-model="qa_current_reply"></textarea>
                                                                            <button ng-click="qa_reply_save_button_pressed(post5.id, qa_current_reply)">Save</button>
                                                                            <button ng-click="qa_reply_cancel_button_pressed(post5.id)">Cancel</button>
                                                                        </div>
                                                                        -->
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="row right-align" ng-show="qa_info_editable">
                    <a class="waves-effect waves-light btn tooltipped" style="margin-bottom:2px" data-position="bottom"
                        data-tooltip="Save" ng-click="qa_create_save_pressed()"
                        ng-disabled="(!qa_title) || (!qa_comment)"><i class="material-icons">save</i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- END OF Q&A RIGHT PANEL-->
</div>